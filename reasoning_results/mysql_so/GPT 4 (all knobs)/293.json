{"res": "To address the issue of emojis being stored as \"???\" in the database when inserted through a PHP and AJAX-based chat system, you need to ensure that the database and the connection between your application and the database support the proper character encoding to handle emojis, which are typically encoded in UTF-8MB4. Here are the relevant database parameters to adjust:\n\n1. **`character_set_client`**: This parameter should be set to `utf8mb4` to ensure that the client (in this case, your application) sends data in the correct character set that supports emojis.\n\n2. **`character_set_connection`**: This parameter should also be set to `utf8mb4`. It ensures that the connection between your application and the database interprets strings in UTF-8MB4, which supports storing emojis.\n\n3. **`character_set_database`**: Setting this to `utf8mb4` ensures that the database itself stores data in UTF-8MB4 encoding.\n\n4. **`character_set_server`**: This should be set to `utf8mb4` to ensure that the server operates in UTF-8MB4 encoding by default.\n\n5. **`collation_connection`**: Set this to a collation that supports `utf8mb4`, such as `utf8mb4_unicode_ci`. This affects how string comparisons are done in the specified character set.\n\n6. **`collation_database`**: This should be set to a collation like `utf8mb4_unicode_ci` to ensure that the database uses the correct collation for UTF-8MB4 encoded data.\n\n7. **`collation_server`**: Set this to `utf8mb4_unicode_ci` to ensure the server uses the correct collation for comparisons and sorting at the server level.\n\nBy setting these parameters, you ensure that all levels of data handling in your database support UTF-8MB4, which is capable of storing emojis and other multi-byte characters. Make sure to adjust these settings in your database configuration and also verify that your database tables are set to use `utf8mb4` character set and collation.\n\nOutput list of parameters:\n```json\n['character_set_client', 'character_set_connection', 'character_set_database', 'character_set_server', 'collation_connection', 'collation_database', 'collation_server']\n```"}